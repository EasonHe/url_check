# 任务配置示例
# - production-* 为线上常规监控示例（应长期稳定）
# - test-* 为告警联调示例（含故意不匹配配置）

tasks:
  # ---------------------------------------------------------------------------
  # 线上示例任务
  # ---------------------------------------------------------------------------
  - name: production-homepage
    method: get
    url: https://httpbin.org/get
    timeout: 10
    interval: 60
    threshold:
      stat_code: 200
      delay: 1000
      math_str: "url"
    ssl:
      verify: true
      warning_days: 30

  - name: production-json-health
    method: get
    url: https://httpbin.org/json
    timeout: 10
    interval: 60
    threshold:
      stat_code: 200
    expect_json: true
    json_path: "$.slideshow.author"
    json_path_value: "Yours Truly"
    ssl:
      verify: true
      warning_days: 30

  # ---------------------------------------------------------------------------
  # 联调示例任务（故意不匹配）
  # ---------------------------------------------------------------------------
  - name: test-keyword-alert
    method: get
    url: https://httpbin.org/json
    timeout: 10
    interval: 30
    threshold:
      stat_code: 200
      # 故意配置不存在关键字，用于验证 content_match 故障告警
      math_str: "NON_EXISTENT_KEYWORD_XYZ"

  - name: test-jsonpath-alert
    method: get
    url: https://httpbin.org/json
    timeout: 10
    interval: 30
    threshold:
      stat_code: 200
    expect_json: true
    json_path: "$.slideshow.author"
    # 故意配置错误值，用于验证 json_path 故障告警
    json_path_value: "WRONG_AUTHOR_NAME"

  - name: test-timeout-alert
    method: get
    url: https://httpbin.org/delay/10
    timeout: 3
    interval: 30
    threshold:
      stat_code: 200

  - name: test-delay-alert
    method: get
    url: https://httpbin.org/delay/2
    timeout: 10
    interval: 30
    threshold:
      stat_code: 200
      delay: 300
